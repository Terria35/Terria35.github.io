<!doctype html>
<title>Your Country</title>
<html lang="en">
  <head style="text-align:center;">
    <link rel="stylesheet" type="text/css" href="https://terria35.github.io/Country.css"/>
    <div id="alert">
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
      <span id="textDisplay"></span>
</div>
  </head>
  <body style="background-color:yellow; text-align:center;">
    <form>
      <p>Your Country Name:<p>
      <input type="text">
    </form>
    <div class="stats">
    <b style="color: green; font-size: 150%">Country Domestic Stats</b>
    <p>Current Population: <span id="pop"></span> </p>
    <p> Current Money: <span id="cMoney"></span> </p>
    <p> Current Loyal Level: <span id="cLoyal"></span> </p>
    <p> Infrastructure Level: <span id="builds"></span> </p>
    <p> Relations Stat: <span id="relation"></span><span id="initials"></span><span id="nucleii"></span><span id="finals"></span> </p>
    <p> Land Mass: <span id="land"></span> </p>
    </div>
    <button id="start"; onclick="start(), this.style.display='none'">Start your Country</button>
    <p> <div class="eco" onclick="openEco(this)">
  <div class="bar1"></div>
  <div class="bar2"></div>
  <div class="bar3"></div>
    </div> </p>
  <p>------------------------Starting Population Upgrades------------------------</p>
  <div class="buttons">
    <button id="Taxes", onclick="raiseTaxes()";>Increase Taxes -500$ (+50 per tick)</button>
    <button id="buildN", onclick="buildNe()";>Build More Neighborhoods -6000$ </button>
    <button onclick="decreaseTax()";>Decrease Tax -1000$ </button>
    <button onclick="MoreLand()";>Aquire more Land - 10,000$ </button>
    <button onclick="moreBuild1()";>Referbish Roads - 2000$</button>
  </div>
  <div id="tier2">
    <p>------------------------100+ Population Upgrades------------------------</p>
      <button onclick="purgeC()";>Purge Corruption - 6000$</button>
    <button onclick="morepolice()";>Hire Police - 8000$</button>
    <button onclick="buildpark()";>Build Parks - 7000$</button>
    <button onclick="buildhomeless1()">Build Homeless Shelters - 2000$</button>
    </div>
    <style>.loseText{visibility:hidden;}</style>
    <div class="loseText">
    <b style="font-size: 1000%">You Lose :(</b>
    </div>
    <script>
      var cMoney = 1000
      var aMoney = 50
      var bMoney = 0
      var pop = 2
      var apop = 1
      var bpop = 0
      var cLoyal = 31
      var aLoyal = 0.5
      var bLoyal = 0
      var housing = 30
      var iLoyal = 0
      var builds = 50
      var ibuilds = 2
      var buildLoyal = 0
      var buildPop = 0
      var buildMoney = 0
      var go = 1
      var corrupt = 0
      var land = 50
      var textDisplay = "Error"
      var crimerate = 0
      var policelvl = 10
      var anticorruptlevel = 0
      var bbuilds = 0
      var colony = false
      var tier = 0
      var pMoney = 0
      document.getElementById("textDisplay").innerHTML = textDisplay;
      
      function decreaseCorrupt() {
        corrupt = corrupt - anticorruptlevel*10
      }
      
      function buildpark() {
        
      }
      function tier2pop() {
        var textDisplay = "You upgraded your town!";
        document.getElementById("textDisplay").innerHTML = textDisplay;
        document.getElementById("alert").style.backgroundColor = "Green";
        document.getElementById("alert").style.display = "block";
        document.getElementById("tier2").style.display = "inline";
      }
      function purgeC() {
        if (cMoney >= 3000) {
          var purgeN = crimerate*-1 + (anticorruptlevel*10)
          var purgeNF = purgeN + policelvl
          if (purgeNF >= 0) {
            if (corrupt > 0) {
            corrupt = corrupt - purgeNF
              if (corrupt < 0) {
                corrupt = 0
              }
            }
            else {
              if (corrupt > 0) {
              corrupt + purgeNF
              }
                if (corrupt < 0) {
                corrupt = 0
              }
            }
          }
        }
      }
      function crimeincrease() {
        crimerate = crimerate + Math.floor((pop/10)+(iLoyal/10))
        if (crimerate > 0) {
          crimerate = crimerate - policelvl*3
        }
        if (crimerate < 0) {
          crimerate = 0
        }
        cloyal = cloyal - Math.floor(crimerate/10);
        cMoney = cMoney - Math.floor(crimerate*10);
        builds = builds - Math.floor(crimerate/5);
      }
      
      function morepolice() {
        if (cMoney = 8000) {
          policelvl = policelvl + 5
        }
      }
      
      function moreBuild1() {
        if (cMoney >= 2000) {
        builds = builds + 20
        cMoney = cMoney - 2000
        buildLoyal = Math.floor(builds/15)
        buildPop = Math.floor(builds/10)
        buildMoney = Math.floor(builds*3)
        document.getElementById("builds").innerHTML = builds;
        corrupt = corrupt + 3
        }
      }
      function MoreLand() {
        if (cMoney >= 10000) {
        var minNumber = 50; 
        var maxNumber = 100; 
        var MoreLB = Math.random(0,1);
        cMoney = cMoney - 10000;
        var MoreL = Math.floor(MoreLB*100);
        if (MoreLB > 0.5) {
          land = land + MoreL
          var textDisplay = "Successfully aquired more land"
          document.getElementById("alert").style.backgroundColor = "red";
          document.getElementById("textDisplay").innerHTML = textDisplay;
         document.getElementById("alert").style.display = "block";
          document.getElementById("land").innerHTML = land;
        }
        if (MoreLB < 0.5) {
          var textDisplay = "Expedition Failed - Try again next time";
          document.getElementById("alert").style.backgroundColor = "red";
          document.getElementById("textDisplay").innerHTML = textDisplay;
          document.getElementById("textDisplay").innerHTML = textDisplay;
          document.getElementById("alert").style.display = "block";
          document.getElementById("land").innerHTML = land;
            }
          }
      }
      function decreaseTax() {
        cMoney = cMoney - 1000
        aMoney = aMoney - 50
        corrupt = corrupt + 1
        iLoyal = iLoyal - 0.3
        document.getElementById("cMoney").innerHTML = cMoney;
      }
      function buildNe() {
        if (cMoney >= 6000) {
        if (housing < land) {
        cMoney = cMoney - 6000
        builds = builds + 15
        housing = housing + 50
        iLoyal = iLoyal - 2
        corrupt = corrupt + 2
        }
        if (housing > land) {
          housing = land
          }
        }
      }
      function raiseTaxes() {
        if (cMoney >= 500) {
        cMoney = cMoney - 500
        aMoney = aMoney + 50
        corrupt = corrupt + 3
        iLoyal = iLoyal + 0.5
        document.getElementById("cMoney").innerHTML = cMoney;
        }
      }
       function openEco(x) {
    x.classList.toggle("change");
    }   
       function lose() {
          var hid = document.getElementsByClassName("loseText");
    if(hid[0].offsetWidth > 0 && hid[0].offsetHeight > 0) {
        hid[0].style.visibility = "visible";}
          var hid1 = document.getElementsByClassName("stats");
    if(hid1[0].offsetWidth > 0 && hid1[0].offsetHeight > 0) {
        hid1[0].style.visibility = "hidden";}
         var go = 0
      }
      function decreaseBuilds() {
        builds = builds - ibuilds
        builds = builds + bbuilds
        buildLoyal = Math.floor(builds/15)
        buildPop = Math.floor(builds/10)
        ibuilds = ibuilds + Math.floor(0.2*pop/5)
        buildMoney = Math.floor(builds*3)
        document.getElementById("builds").innerHTML = builds;
      }
      function IncreaseLoyal() {
        cLoyal = cLoyal - Math.floor(cLoyal*0.15)
        if (cLoyal <= 0) {
          pop = pop - 2
        }
        if (iLoyal >= 15) {
          cLoyal = cLoyal - 0.5
        }
        if (iLoyal >= 35) {
          cLoyal = cLoyal - 3
        }
        if (iLoyal >= 50) {
          cLoyal = cLoyal - 5
        }
        if (iLoyal >= 75) {
          cLoyal = cLoyal - 10
        }
        if (iLoyal >= 100) {
          cLoyal = cLoyal - 20
        }
        cLoyal = cLoyal + aLoyal + bLoyal + buildLoyal - corrupt
          iLoyal = iLoyal + 1
        document.getElementById("cLoyal").innerHTML = cLoyal;
      }
      function IncreasePop() {
        pop = pop - Math.floor(pop*0.1)
         if (cLoyal < 0) {
          pop = pop - 8
        }
         if (cLoyal < 10) {
          pop = pop - 4
        }
         if (cLoyal < 20) {
          pop = pop - 2
        }
        if (cLoyal < 30) {
          pop = pop - 1
        }
        if (housing <= pop) {
          iLoyal = iLoyal + 0.5
        }
        if (pop <= 0) {
          lose()
        }
        if (housing > pop) {
        iLoyal = iLoyal - 0.1
        pop = Math.floor(pop + apop + bpop + buildPop);
        document.getElementById("pop").innerHTML = pop;
          if (pop > housing) {
            pop = housing
          }
        }
      }
      function IncreaseMoney() {
        cMoney = cMoney + aMoney + bMoney + buildMoney + pMoney - corrupt*5;
        pMoney = Math.floor(pop*3)
        document.getElementById("cMoney").innerHTML = cMoney;
        //inserting population detectors here for simplicity
        if (pop >= 100) {
          if (tier = 0) {
          tier2pop();
          tier = 1
          }
        }
      }
      const initials = ['b', 'bl', 'br', 'bh', 'd', 'dr', 'f', 'fr', 'fl', 'ph', 'g', 'gr', 'gl', 'gh', 'h', 'j', 'c', 'k', 'ch', 'cl', 'cr', 'chr', 'l', 'm', 'n', 'kn', 'gn', 'p', 'pr', 'pl', 'r', 'wr', 's', 'ps', 'sc', 'sch', 't', 'pt', 'v', 'w', 'wh', 'y', 'z', 'th', 'ch', 'sh', 'qu'];
const nucleii = ['a', 'e', 'i', 'o', 'u', 'ae', 'ee', 'ie', 'oe', 'ue', 'oo', 'au', 'oi', 'ai', 'ea', 'y', 'ye', 'ou', 'oy', 'ey', 'uy', 'ay'];
const finals = ['b', 'd', 'f', 'g', 'ge', 'dge', 'ck', 'x', 'ks', 'cks', 'l', 'm', 'mb', 'n', 'p', 'r', 's', 'se', 'ce', 't', 'v', 've', 'w', 'we', 'y', 'z', 'th', 'the', 'ch', 'tch', 'sh', 'sch', 'ng'];
     
     function generateRegion() {
    document.getElementById("initials").innerHTML = initials[Math.floor(Math.random() * initials.length)]
  document.getElementById("nucleii").innerHTML = nucleii[Math.floor(Math.random() * nucleii.length)]
    document.getElementById("finals").innerHTML = finals[Math.floor(Math.random() * finals.length)]
     }
       
      function start() {
        setInterval(crimeincrease, 7000);
        setInterval(decreaseCorrupt, 10000);
        setInterval(decreaseBuilds, 10000);
        setInterval(IncreaseLoyal, 7000);
        setInterval(IncreasePop, 4000);
        setInterval(IncreaseMoney, 1500);
        document.getElementById("land").innerHTML = land;
    var randomnumber = Math.random();
        if (randomnumber < 0.5) {
          document.getElementById('relation').innerHTML = 'Colony of '; 
          generateRegion();
          colony = true
        }
        if (randomnumber > 0.5) {
          document.getElementById('relation').innerHTML = 'Independent';  
        }
      }
    </script>
  </body>
  <p>ver.0.0.2.1</p>
</html>
